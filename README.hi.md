<p align="center">
  <a href="README.ja.md">日本語</a> | <a href="README.zh.md">中文</a> | <a href="README.es.md">Español</a> | <a href="README.fr.md">Français</a> | <a href="README.md">English</a> | <a href="README.it.md">Italiano</a> | <a href="README.pt-BR.md">Português (BR)</a>
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/mcp-tool-shop-org/brand/main/logos/claude-guardian/readme.png" width="400" alt="claude-guardian" />
</p>

<p align="center">
  <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="MIT License" /></a>
  <a href="https://mcp-tool-shop-org.github.io/claude-guardian/"><img src="https://img.shields.io/badge/Landing_Page-live-blue" alt="Landing Page" /></a>
</p>

क्लाउड कोड के लिए फ्लाइट कंप्यूटर: लॉग रोटेशन, वॉचडॉग, क्रैश बंडल और एमसीपी (MCP) की स्व-जागरूकता।

क्लाउड गार्डियन एक स्थानीय विश्वसनीयता परत है जो क्लाउड कोड सत्रों को सुचारू रूप से चलाने में मदद करती है। यह लॉग की अत्यधिक मात्रा, डिस्क पर दबाव और सिस्टम के अटकने जैसी समस्याओं का पता लगाने से पहले ही उनका निवारण करती है, और जब कोई समस्या होती है तो उसका रिकॉर्ड रखती है। इसके अलावा, यह एक एमसीपी सर्वर प्रदान करती है ताकि क्लाउड सत्र के दौरान ही खुद की निगरानी कर सके।

## यह क्या करता है।

| आदेश। | उद्देश्य। |
|---------|---------|
| `preflight` | क्लाउड प्रोजेक्ट लॉग्स की जांच करें, बड़ी डाइरेक्टरी/फाइलों की रिपोर्ट तैयार करें, और यदि आवश्यक हो तो स्वचालित रूप से उन्हें ठीक करने का विकल्प चुनें। |
| `doctor` | एक डायग्नोस्टिक बंडल (ज़िप फ़ाइल) बनाएं जिसमें सिस्टम की जानकारी, लॉग फ़ाइलें और जर्नल शामिल हों। |
| `run -- <cmd>` | किसी भी कमांड को "वॉचडॉग" निगरानी के साथ शुरू करें, और यदि कोई त्रुटि या सिस्टम अटक जाता है, तो स्वचालित रूप से सभी संबंधित फ़ाइलों को एक साथ समेकित करें। |
| `status` | एक बार में स्वास्थ्य जांच: डिस्क की खाली जगह, लॉग फ़ाइलों का आकार, और चेतावनियाँ। |
| `watch` | पृष्ठभूमि प्रक्रिया (बैकग्राउंड डेमॉन): निरंतर निगरानी, घटना ट्रैकिंग, बजट का अनुपालन। |
| `budget` | एक साथ होने वाले कार्यों की सीमा (बजट) को देखें और प्रबंधित करें (दिखाएं/प्राप्त करें/मुक्त करें)। |
| `mcp` | क्लाउड कोड के स्व-निगरानी के लिए, एमसीपी सर्वर (8 उपकरण) शुरू करें। |

## स्थापित करें।

```bash
npm install -g claude-guardian
```

या फिर सीधे चलाएं:

```bash
npx claude-guardian preflight
```

## शुरुआत कैसे करें।

### अपने परिवेश की जांच करें।

```bash
claude-guardian status
```

```
=== Claude Guardian Preflight ===

Disk free: 607.13GB [OK]
Claude projects: C:\Users\you\.claude\projects
Total size: 1057.14MB

Project directories (by size):
  my-project: 1020.41MB

Issues found:
  [WARNING] Project log dir is 1020.41MB (limit: 200MB)
  [WARNING] File is 33.85MB (limit: 25MB)

[guardian] disk=607.13GB | logs=1057.14MB | issues=2
```

### स्वचालित रूप से लॉग फ़ाइलों के आकार को कम करें।

```bash
claude-guardian preflight --fix
```

यह उपकरण पुराने लॉग फ़ाइलों (gzip प्रारूप में) को व्यवस्थित करता है, और `.jsonl` या `.log` जैसी बड़ी फ़ाइलों को उनकी अंतिम 'एन' पंक्तियों तक छोटा कर देता है। प्रत्येक कार्रवाई को एक लॉग फ़ाइल में दर्ज किया जाता है, ताकि इसकी जानकारी आसानी से प्राप्त की जा सके।

### एक दुर्घटना रिपोर्ट तैयार करें।

```bash
claude-guardian doctor --out ./bundle.zip
```

एक ज़िप फ़ाइल बनाता है जिसमें शामिल हैं:
- `summary.json` — सिस्टम की जानकारी, फ़ाइल आकार की रिपोर्ट, प्रारंभिक जांच के परिणाम।
- `log-tails/` — प्रत्येक लॉग फ़ाइल की अंतिम 500 पंक्तियाँ।
- `journal.jsonl` — अभिभावक (guardian) द्वारा की गई हर एक गतिविधि।

### "वॉचडॉग" के साथ दौड़ें।

```bash
claude-guardian run -- claude
claude-guardian run --auto-restart --hang-timeout 120 -- node server.js
```

वॉचडॉग:
1. यह आपके कमांड को एक चाइल्ड प्रोसेस के रूप में शुरू करता है।
2. यह `stdout/stderr` पर गतिविधि की निगरानी करता है।
3. यदि `--hang-timeout` सेकंड तक कोई गतिविधि नहीं होती है → यह एक "डॉक्टर बंडल" कैप्चर करता है।
4. यदि प्रोसेस क्रैश हो जाता है → यह एक बंडल कैप्चर करता है, और वैकल्पिक रूप से, बैकऑफ़ के साथ पुनः आरंभ किया जा सकता है।

## MCP सर्वर (वास्तविक अनलॉक)।

"गार्डियन" को एक स्थानीय MCP सर्वर के रूप में पंजीकृत करें ताकि क्लाउड स्वयं अपनी निगरानी कर सके।"

निम्नलिखित को `~/.claude.json` फ़ाइल में जोड़ें:

```json
{
  "mcpServers": {
    "guardian": {
      "command": "npx",
      "args": ["claude-guardian", "mcp"]
    }
  }
}
```

फिर क्लाउड कॉल कर सकता है:

| उपकरण। | यह क्या वापस करता है। |
|------|----------------|
| `guardian_status` | डिस्क, लॉग, प्रक्रियाएं, अटकने का खतरा, बजट, ध्यान का स्तर। |
| `guardian_preflight_fix` | यह प्रक्रिया लॉग फ़ाइलों को नियमित रूप से अपडेट करती है/अनावश्यक डेटा हटाती है, और इसके पहले और बाद की स्थिति की रिपोर्ट प्रदान करती है। |
| `guardian_doctor` | यह एक डायग्नोस्टिक पैकेज (ज़िप फ़ाइल) बनाता है और फ़ाइल का पथ (location) और सारांश (summary) वापस करता है। |
| `guardian_nudge` | सुरक्षित स्वचालित सुधार: यदि लॉग फ़ाइलें बहुत बड़ी हो गई हैं, तो उन्हें ठीक करें, और यदि आवश्यक हो तो बंडल (डेटा संग्रह) को कैप्चर करें। |
| `guardian_budget_get` | वर्तमान में अनुमत समवर्ती उपयोगकर्ताओं की संख्या, उपयोग में ली गई स्लॉट की संख्या, और सक्रिय लीज़ की संख्या। |
| `guardian_budget_acquire` | "एक साथ काम करने के लिए स्लॉट का अनुरोध करें (यह लीज़ आईडी वापस करेगा)।" |
| `guardian_budget_release` | जब आप भारी काम पूरा कर लें, तो पट्टा (लीज) रद्द कर दें। |
| `guardian_recovery_plan` | एक चरणबद्ध पुनर्प्राप्ति योजना, जिसमें विशिष्ट उपकरणों के नाम बताए गए हैं जिनका उपयोग किया जाना है। |

यह क्लाउड को यह कहने की अनुमति देता है: "चेतावनी: 'गार्डियन नज़' चल रहा है, जिसके बाद समवर्तीता (concurrency) कम की जाएगी।"

## कॉन्फ़िगरेशन।

तीन नॉब (अन्य सभी सेटिंग्स डिफ़ॉल्ट रूप से निर्धारित हैं और उचित मानों पर सेट हैं):

| ध्वज। | डिफ़ॉल्ट। | विवरण। |
|------|---------|-------------|
| `--max-log-mb` | `200` | मैक्स प्रोजेक्ट लॉग डायरेक्टरी का अधिकतम आकार (मेगाबाइट में)। |
| `--hang-timeout` | `300` | किसी भी गतिविधि की कमी के बाद "हैंग" (अटकना) घोषित करने से पहले के सेकंड की संख्या। |
| `--auto-restart` | `false` | दुर्घटना या अटकने की स्थिति में स्वचालित रूप से पुनः चालू होना। |

एक अतिरिक्त, पूर्वनिर्धारित सुरक्षा उपाय:
- **डिस्क में 5 जीबी से कम खाली जगह** → स्वचालित रूप से "आक्रामक" मोड सक्रिय हो जाएगा (कम डेटा प्रतिधारण अवधि, और कम सीमाएं)।

## विश्वास मॉडल।

क्लाउड गार्डियन केवल स्थानीय स्तर पर ही काम करता है। इसमें कोई नेटवर्क कनेक्टिविटी नहीं होती, न ही कोई डेटा संग्रह (टेलीमेट्री) होता है, और यह क्लाउड पर निर्भर नहीं है।

**यह निम्नलिखित जानकारी प्रदर्शित करता है:** `~/.claude/projects/` (लॉग फ़ाइलें, आकार, संशोधन की तिथियां), प्रक्रिया सूची (सीपीयू, मेमोरी, अपटाइम, और क्लाउड से संबंधित प्रक्रियाओं के लिए हैंडल की संख्या, जो `pidusage` के माध्यम से प्राप्त की जाती है)।

**यह निम्नलिखित फ़ाइलें बनाता है:** `~/.claude-guardian/` (state.json, budget.json, journal.jsonl, डॉक्टर संबंधी फ़ाइलें)। सभी फ़ाइलें उपयोगकर्ता के होम डायरेक्टरी में स्थित हैं।

**यह क्या जानकारी एकत्र करता है:** सिस्टम की जानकारी (ऑपरेटिंग सिस्टम, सीपीयू, मेमोरी, डिस्क), लॉग फ़ाइलों के अंतिम 500 लाइनें, प्रोसेस स्नैपशॉट, और गार्डियन का अपना जर्नल। इसमें कोई एपीआई कुंजी, टोकन, क्रेडेंशियल या उपयोगकर्ता सामग्री शामिल नहीं है।

**खतरनाक क्रियाएं — गार्डियन क्या नहीं करेगा:**
- किसी भी प्रोसेस को बंद करना या सिग्नल भेजना (कोई `SIGKILL` नहीं, कोई `SIGTERM` नहीं)
- क्लाउड कोड या किसी अन्य प्रोसेस को पुनः आरंभ करना
- फ़ाइलों को हटाना (रोटेशन = gzip, ट्रिमिंग = अंतिम N लाइनें रखना)
- नेटवर्क अनुरोध करना या किसी सर्वर को जानकारी भेजना
- विशेषाधिकार बढ़ाना या अन्य उपयोगकर्ताओं के डेटा तक पहुंचना

यदि कभी प्रोसेस को बंद करने या ऑटो-रीस्टार्ट की सुविधा जोड़ी जाती है, तो यह एक स्पष्ट "ऑप्ट-इन" फ़्लैग के माध्यम से ही उपलब्ध होगी, जिसका दस्तावेज़ यहां दिया गया है, और डिफ़ॉल्ट रूप से यह बंद रहेगा।

## डिजाइन सिद्धांत

- **सबूत, अनुमानों से बेहतर:** प्रत्येक क्रिया के लिए एक जर्नल प्रविष्टि लिखी जाती है; क्रैश बंडल स्थिति को कैप्चर करते हैं, अनुमानों को नहीं।
- **निश्चित:** कोई मशीन लर्निंग नहीं, केवल फ़ाइल की उम्र और आकार से संबंधित बुनियादी नियम। एक निर्णय तालिका जिसे आप 60 सेकंड में पढ़ सकते हैं।
- **डिफ़ॉल्ट रूप से सुरक्षित:** रोटेशन = gzip (उलटाई जा सकती है), ट्रिमिंग = अंतिम N लाइनें रखना (डेटा संरक्षित), v1 में कोई फ़ाइल डिलीट नहीं की जाती।
- **सरल निर्भरताएं:** कमांडर, pidusage, आर्काइवर, @modelcontextprotocol/sdk। बस इतना ही।

## विकास

```bash
npm install
npm run build
npm test
```

## लाइसेंस

एमआईटी

---

यह <a href="https://mcp-tool-shop.github.io/">MCP टूल शॉप</a> द्वारा बनाया गया है।
